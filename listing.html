<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Nova Stays KE - Listings</title>

  <!-- Bootstrap (optional) -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    .carousel-btn {
      background-color: rgba(0,0,0,0.4);
      color: white;
      font-size: 14px;
      padding: 4px 10px;
      border-radius: 9999px;
    }
    html, body {
      margin: 0;
      padding: 0;
      overflow-x: hidden;
      max-width: 100vw;
    }
  </style>
</head>
<body class="bg-gray-50 text-gray-800 overflow-x-hidden w-screen max-w-full">

<!-- Header -->
<!-- Header -->
<header class="bg-white shadow p-4 flex justify-between items-start">
  <h1 class="text-xl font-bold text-green-600">Nova Stays KE</h1>
  <div class="text-sm text-gray-600 text-right leading-snug">
    <span class="font-semibold" id="userName">John Doe</span><br>
    <span id="userEmail">johndoe@example.com</span>
  </div>
</header>


<!-- Add this style block somewhere in your <head> or a CSS file -->
<style>
  .no-scrollbar::-webkit-scrollbar {
    display: none;
  }
  .no-scrollbar {
    -ms-overflow-style: none;  /* IE and Edge */
    scrollbar-width: none;  /* Firefox */
  }
</style>

<!-- Top Location Filters -->
<nav class="flex overflow-x-auto no-scrollbar gap-3 my-4 px-2">
  <a href="#" class="bg-green-100 text-green-800 px-4 py-1.5 rounded-full text-sm font-medium whitespace-nowrap">Nairobi</a>
  <a href="#" class="bg-green-100 text-green-800 px-4 py-1.5 rounded-full text-sm font-medium whitespace-nowrap">Mombasa</a>
  <a href="#" class="bg-green-100 text-green-800 px-4 py-1.5 rounded-full text-sm font-medium whitespace-nowrap">Diani</a>
  <a href="#" class="bg-green-100 text-green-800 px-4 py-1.5 rounded-full text-sm font-medium whitespace-nowrap">Malindi</a>
  <a href="#" class="bg-green-100 text-green-800 px-4 py-1.5 rounded-full text-sm font-medium whitespace-nowrap">Kisumu</a>
  <a href="#" class="bg-green-100 text-green-800 px-4 py-1.5 rounded-full text-sm font-medium whitespace-nowrap">Naivasha</a>
  <a href="#" class="bg-green-100 text-green-800 px-4 py-1.5 rounded-full text-sm font-medium whitespace-nowrap">Nakuru</a>
  <a href="#" class="bg-green-100 text-green-800 px-4 py-1.5 rounded-full text-sm font-medium whitespace-nowrap">Dar es Salaam</a>
  <a href="#" class="bg-green-100 text-green-800 px-4 py-1.5 rounded-full text-sm font-medium whitespace-nowrap">Zanzibar</a>
  <a href="#" class="bg-green-100 text-green-800 px-4 py-1.5 rounded-full text-sm font-medium whitespace-nowrap">Mikocheni</a>
  <a href="#" class="bg-green-100 text-green-800 px-4 py-1.5 rounded-full text-sm font-medium whitespace-nowrap">Ngorongoro Crater</a>
</nav>

  <!-- Listings Section -->
  <main class="max-w-6xl mx-auto px-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-10">

<!-- Listing 4 -->
<div class="bg-white rounded-lg shadow-sm overflow-hidden max-w-sm mx-auto">
  <!-- Main Image -->
  <img
    id="carouselThumb4"
    src="IMG-20250520-WA0028.jpg"
    class="w-full h-48 object-cover"
    alt="Listing Image"
  />

  <!-- Thumbnails -->
  <div class="flex justify-center items-center gap-2 mt-2 overflow-x-auto">
    <!-- Thumbnails for Listing 4 -->
<div class="flex justify-center items-center gap-2 mt-2 overflow-x-auto">
  <img src="IMG-20250520-WA0025.jpg" class="w-16 h-12 object-cover rounded cursor-pointer" alt="Thumb 1" onclick="document.getElementById('carouselThumb4').src=this.src" />
  <img src="IMG-20250520-WA0028.jpg" class="w-16 h-12 object-cover rounded cursor-pointer" alt="Thumb 2" onclick="document.getElementById('carouselThumb4').src=this.src" />
  <img src="IMG-20250520-WA0015.jpg" class="w-16 h-12 object-cover rounded cursor-pointer" alt="Thumb 3" onclick="document.getElementById('carouselThumb4').src=this.src" />
  <img src="IMG-20250520-WA0033.jpg" class="w-16 h-12 object-cover rounded cursor-pointer" alt="Thumb 4" onclick="document.getElementById('carouselThumb4').src=this.src" />
  <img src="IMG-20250520-WA0035.jpg" class="w-16 h-12 object-cover rounded cursor-pointer" alt="Thumb 5" onclick="document.getElementById('carouselThumb4').src=this.src" />
  <img src="IMG-20250520-WA0027.jpg" class="w-16 h-12 object-cover rounded cursor-pointer" alt="Thumb 6" onclick="document.getElementById('carouselThumb4').src=this.src" />
  <img src="IMG-20250520-WA0022.jpg" class="w-16 h-12 object-cover rounded cursor-pointer" alt="Thumb 7" onclick="document.getElementById('carouselThumb4').src=this.src" />
  <img src="IMG-20250520-WA0020.jpg" class="w-16 h-12 object-cover rounded cursor-pointer" alt="Thumb 8" onclick="document.getElementById('carouselThumb4').src=this.src" />
  <img src="IMG-20250520-WA0037.jpg" class="w-16 h-12 object-cover rounded cursor-pointer" alt="Thumb 9" onclick="document.getElementById('carouselThumb4').src=this.src" />
  <img src="IMG-20250520-WA0026.jpg" class="w-16 h-12 object-cover rounded cursor-pointer" alt="Thumb 10" onclick="document.getElementById('carouselThumb4').src=this.src" />
  <img src="IMG-20250520-WA0017.jpg" class="w-16 h-12 object-cover rounded cursor-pointer" alt="Thumb 11" onclick="document.getElementById('carouselThumb4').src=this.src" />
  <img src="IMG-20250520-WA0023.jpg" class="w-16 h-12 object-cover rounded cursor-pointer" alt="Thumb 5" onclick="document.getElementById('carouselThumb4').src=this.src" />
  <img src="IMG-20250520-WA0034.jpg" class="w-16 h-12 object-cover rounded cursor-pointer" alt="Thumb 6" onclick="document.getElementById('carouselThumb4').src=this.src" />
  <img src="IMG-20250520-WA0039.jpg" class="w-16 h-12 object-cover rounded cursor-pointer" alt="Thumb 7" onclick="document.getElementById('carouselThumb4').src=this.src" />
  <img src="IMG-20250520-WA0031.jpg" class="w-16 h-12 object-cover rounded cursor-pointer" alt="Thumb 8" onclick="document.getElementById('carouselThumb4').src=this.src" />
  <img src="IMG-20250520-WA0038.jpg" class="w-16 h-12 object-cover rounded cursor-pointer" alt="Thumb 9" onclick="document.getElementById('carouselThumb4').src=this.src" />
  <img src="IMG-20250520-WA0032.jpg" class="w-16 h-12 object-cover rounded cursor-pointer" alt="Thumb 10" onclick="document.getElementById('carouselThumb4').src=this.src" />
  <img src="IMG-20250520-WA0036.jpg" class="w-16 h-12 object-cover rounded cursor-pointer" alt="Thumb 11" onclick="document.getElementById('carouselThumb4').src=this.src" />
  <img src="IMG-20250520-WA0018.jpg" class="w-16 h-12 object-cover rounded cursor-pointer" alt="Thumb 10" onclick="document.getElementById('carouselThumb4').src=this.src" />
  <img src="IMG-20250520-WA0019.jpg" class="w-16 h-12 object-cover rounded cursor-pointer" alt="Thumb 11" onclick="document.getElementById('carouselThumb4').src=this.src" />
</div>

  </div>

  <div class="p-3">
    <div class="flex items-center justify-between mb-1">
      <div class="flex items-center gap-2">
        <!-- Host image -->
        <img
          src="IMG-20250509-WA0010.jpg"
          class="w-7 h-7 rounded-full object-cover"
          alt="Host"
        />
        <div class="text-xs">
          <p class="font-semibold">Jacob Amaitsa</p>
          <p class="text-gray-500">Kileleshwa</p>
        </div>
      </div>
      <div class="text-yellow-500 text-xs">
        ⭐⭐⭐⭐⭐ (12)
        <a href="#"
          class="text-blue-600 underline ml-2 review-trigger"
          data-listing="Fayama Homes Kileleshwa"
          data-host="Jacob Amaitsa">
          View Reviews
        </a>
      </div>
    </div>
    <h3 class="font-semibold text-sm">Fayama Homes Kileleshwa</h3>
    <p class="text-green-600 font-bold text-sm">USD 70 / night</p>
    <div class="flex flex-wrap gap-1 mt-2 text-[11px] text-gray-700">
      <span class="bg-gray-200 px-2 py-[2px] rounded-full">WiFi</span>
      <span class="bg-gray-200 px-2 py-[2px] rounded-full">Balcony</span>
      <span class="bg-gray-200 px-2 py-[2px] rounded-full">Kitchen</span>
      <span class="bg-gray-200 px-2 py-[2px] rounded-full">Pool</span>
      <span class="bg-gray-200 px-2 py-[2px] rounded-full">Laundry</span>
      <span class="bg-gray-200 px-2 py-[2px] rounded-full">Parking</span>
    </div>
    <button
      onclick="bookNow('Fayama Homes Kileleshwa', 95, 'Kileleshwa')"
      class="mt-3 w-full bg-green-600 hover:bg-green-700 text-white text-sm py-1.5 rounded-md"
    >
      Book Now
    </button>
  </div>
</div>

<!-- Listing 5 -->
<div class="bg-white rounded-lg shadow-sm overflow-hidden max-w-sm mx-auto">
  <img id="carouselThumb5" src="IMG-20250520-WA0006.jpg" class="w-full h-48 object-cover" alt="Listing Image" />
  <div class="flex justify-center items-center gap-2 mt-2 overflow-x-auto">
    <img src="IMG-20250520-WA0006.jpg" class="w-16 h-12 object-cover rounded cursor-pointer" onclick="document.getElementById('carouselThumb5').src=this.src" />
    <img src="IMG-20250520-WA0007.jpg" class="w-16 h-12 object-cover rounded cursor-pointer" onclick="document.getElementById('carouselThumb5').src=this.src" />
    <img src="IMG-20250520-WA0005.jpg" class="w-16 h-12 object-cover rounded cursor-pointer" onclick="document.getElementById('carouselThumb5').src=this.src" />
    <img src="IMG-20250520-WA0009.jpg" class="w-16 h-12 object-cover rounded cursor-pointer" onclick="document.getElementById('carouselThumb5').src=this.src" />
    <img src="IMG-20250520-WA0010.jpg" class="w-16 h-12 object-cover rounded cursor-pointer" onclick="document.getElementById('carouselThumb5').src=this.src" />
    <img src="IMG-20250520-WA0011.jpg" class="w-16 h-12 object-cover rounded cursor-pointer" onclick="document.getElementById('carouselThumb5').src=this.src" />
    <img src="IMG-20250520-WA0012.jpg" class="w-16 h-12 object-cover rounded cursor-pointer" onclick="document.getElementById('carouselThumb5').src=this.src" />
    <img src="IMG-20250520-WA0013.jpg" class="w-16 h-12 object-cover rounded cursor-pointer" onclick="document.getElementById('carouselThumb5').src=this.src" />
    <img src="IMG-20250520-WA0004.jpg" class="w-16 h-12 object-cover rounded cursor-pointer" onclick="document.getElementById('carouselThumb5').src=this.src" />
  </div>
  <div class="p-3">
    <div class="flex items-center justify-between mb-1">
      <div class="flex items-center gap-2">
        <img src="IMG-20250520-WA0014.jpg" class="w-7 h-7 rounded-full object-cover" alt="Host" />
        <div class="text-xs">
          <p class="font-semibold">Bree Joy</p>
          <p class="text-gray-500">Kilimani</p>
        </div>
      </div>
      <div class="text-yellow-500 text-xs">
        ⭐⭐⭐⭐ (30)
        <a href="#" class="text-blue-600 underline ml-2 review-trigger" data-listing="Opal Heights Kilimani" data-host="Tabitha Nelima">View Reviews</a>
      </div>
    </div>
    <h3 class="font-semibold text-sm">Opal Heights Kilimani</h3>
    <p class="text-green-600 font-bold text-sm">USD 105 / night</p>
    <div class="flex flex-wrap gap-1 mt-2 text-[11px] text-gray-700">
      <span class="bg-gray-200 px-2 py-[2px] rounded-full">Pool</span>
      <span class="bg-gray-200 px-2 py-[2px] rounded-full">Gym</span>
      <span class="bg-gray-200 px-2 py-[2px] rounded-full">Elevator</span>
    </div>
    <button onclick="bookNow('Opal Heights Kilimani', 105, 'Kilimani')" class="mt-3 w-full bg-green-600 hover:bg-green-700 text-white text-sm py-1.5 rounded-md">Book Now</button>
  </div>
</div>

  </main>

  <!-- Review Modal -->
<div id="reviewModal" class="modal hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
  <div class="bg-white rounded-lg shadow-lg p-6 max-w-sm w-full mx-4 text-center">
    <h2 class="text-lg font-bold mb-3">Review Access Restricted</h2>
    <p id="reviewModalMessage" class="text-gray-700 text-sm leading-relaxed"></p>
    <button id="closeReviewModal" class="mt-4 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded">Close</button>
  </div>
</div>

<script>
  // Booking redirect logic
  function bookNow(name, price, location) {
    const userName = document.getElementById("userName").textContent;
    const userEmail = document.getElementById("userEmail").textContent;
    const url = `book.html?listing=${encodeURIComponent(name)}&price=${price}&location=${encodeURIComponent(location)}&user=${encodeURIComponent(userName)}&email=${encodeURIComponent(userEmail)}`;
    window.location.href = url;
  }

  // Object to store listings and their image arrays + current index for carousel
  const listings = {
    1: {
      images: [
        "https://source.unsplash.com/400x300/?apartment",
        "https://source.unsplash.com/400x300/?room",
        "https://source.unsplash.com/400x300/?villa"
      ],
      index: 0
    },
    2: {
      images: [
        "https://source.unsplash.com/400x300/?balcony",
        "https://source.unsplash.com/400x300/?living-room",
        "https://source.unsplash.com/400x300/?kitchen"
      ],
      index: 0
    },
    3: {
      images: [
        "IMG-20250517-WA0016.jpg",
        "IMG-20250517-WA0010.jpg",
        "IMG-20250517-WA0007.jpg",
        "IMG-20250517-WA0012.jpg",
        "IMG-20250517-WA0017.jpg",
        "IMG-20250517-WA0014.jpg",
        "IMG-20250517-WA0011.jpg",
        "IMG-20250517-WA0013.jpg",
        "IMG-20250517-WA0009.jpg",
        "IMG-20250517-WA0018.jpg",
        "IMG-20250517-WA0008.jpg"
      ],
      index: 0
    }
  };

  // Track last listing ID used, to assign new IDs incrementally
  let lastListingId = Object.keys(listings).length;

  // Update image displayed for a given listing ID
  function updateImage(listingId) {
    const listing = listings[listingId];
    if (!listing) return;
    const img = document.getElementById(`carouselThumb${listingId}`);
    if (img) img.src = listing.images[listing.index];
  }

  // Next image button handler
  function nextImage(listingId) {
    const listing = listings[listingId];
    if (!listing) return;
    listing.index = (listing.index + 1) % listing.images.length;
    updateImage(listingId);
  }

  // Previous image button handler
  function prevImage(listingId) {
    const listing = listings[listingId];
    if (!listing) return;
    listing.index = (listing.index - 1 + listing.images.length) % listing.images.length;
    updateImage(listingId);
  }

  // On page load, populate logged-in user info
  document.addEventListener('DOMContentLoaded', () => {
    const user = JSON.parse(localStorage.getItem('novaLoggedIn'));
    if (user) {
      const userNameElem = document.getElementById('userName');
      const userEmailElem = document.getElementById('userEmail');
      if (userNameElem && userEmailElem) {
        userNameElem.textContent = user.name;
        userEmailElem.textContent = user.email;
      }
    }
  });

  // Review modal trigger & close handlers
  document.addEventListener('DOMContentLoaded', () => {
    document.querySelectorAll('.review-trigger').forEach(button => {
      button.addEventListener('click', function (e) {
        e.preventDefault();
        const listing = this.dataset.listing;
        const host = this.dataset.host;
        const message = `
          Your email has not yet made any booking with <strong>${listing}</strong>.<br>
          Only users who have been hosted by <strong>${host}</strong> are allowed to leave a review within 72hrs after check-out.
        `;
        document.getElementById('reviewModalMessage').innerHTML = message;
        document.getElementById('reviewModal').classList.remove('hidden');
      });
    });

    document.getElementById('closeReviewModal').addEventListener('click', () => {
      document.getElementById('reviewModal').classList.add('hidden');
    });
  });

  // Dynamically add a new listing to the DOM and listings object
  function addListing(listingData) {
    // listingData = {
    //   hostName, hostAvatarUrl, hostLocation, hostRating, hostReviewCount,
    //   propertyName, propertyPrice, propertyLocation,
    //   propertyAmenities: [], propertyImages: []
    // }

    lastListingId++;
    const id = lastListingId;

    // Add to listings object for carousel control
    listings[id] = {
      images: listingData.propertyImages,
      index: 0
    };

    // Build amenities badges HTML
    const amenitiesHtml = listingData.propertyAmenities.map(am => 
      `<span class="bg-gray-200 px-2 py-[2px] rounded-full">${am}</span>`
    ).join('');

    // Create listing card element with matching structure and IDs/classes
    const listingHTML = `
      <div class="bg-white rounded-lg shadow-sm overflow-hidden" id="listingCard${id}">
        <img id="carouselThumb${id}" src="${listingData.propertyImages[0]}" class="w-full h-48 object-cover" alt="Listing Image" />
        <div class="flex justify-center items-center gap-3 mt-1">
          <button onclick="prevImage('${id}')" class="carousel-btn">←</button>
          <button onclick="nextImage('${id}')" class="carousel-btn">→</button>
        </div>
        <div class="p-3">
          <div class="flex items-center justify-between mb-1">
            <div class="flex items-center gap-2">
              <img src="${listingData.hostAvatarUrl}" class="w-7 h-7 rounded-full" alt="Host" />
              <div class="text-xs">
                <p class="font-semibold">${listingData.hostName}</p>
                <p class="text-gray-500">${listingData.hostLocation}</p>
              </div>
            </div>
            <div class="text-yellow-500 text-xs">⭐️${listingData.hostRating} (${listingData.hostReviewCount})</div>
          </div>
          <h3 class="font-semibold text-sm">${listingData.propertyName}</h3>
          <p class="text-green-600 font-bold text-sm">USD ${listingData.propertyPrice} / night</p>
          <div class="flex flex-wrap gap-1 mt-2 text-[11px] text-gray-700">${amenitiesHtml}</div>
          <button onclick="bookNow('${listingData.propertyName}', ${listingData.propertyPrice}, '${listingData.propertyLocation}')" class="mt-3 w-full bg-green-600 hover:bg-green-700 text-white text-sm py-1.5 rounded-md">Book Now</button>
        </div>
      </div>
    `;

    // Append the new listing after all existing listings in main container
    const listingsContainer = document.querySelector('main.max-w-6xl');
    if (listingsContainer) {
      listingsContainer.insertAdjacentHTML('beforeend', listingHTML);
    }
  }

  // Example usage: 
  // addListing({
  //   hostName: 'New Host',
  //   hostAvatarUrl: 'https://i.pravatar.cc/40?img=12',
  //   hostLocation: 'Nakuru',
  //   hostRating: '4.5',
  //   hostReviewCount: '5',
  //   propertyName: 'New Cozy Cottage',
  //   propertyPrice: 55,
  //   propertyLocation: 'Nakuru',
  //   propertyAmenities: ['WiFi', 'Parking', 'Breakfast'],
  //   propertyImages: [
  //     'https://source.unsplash.com/400x300/?cottage1',
  //     'https://source.unsplash.com/400x300/?cottage2',
  //     'https://source.unsplash.com/400x300/?cottage3'
  //   ]
  // });
</script>
<script>
  window.addEventListener('DOMContentLoaded', () => {
    const container = document.getElementById('listingsContainer'); // Adjust ID if different
    const listings = JSON.parse(localStorage.getItem('novaListings') || '[]');

    if (!container) {
      console.error('Container with ID "listingsContainer" not found.');
      return;
    }

    if (listings.length === 0) {
      container.innerHTML = '<p class="text-gray-600 text-center">No listings found.</p>';
      return;
    }

    container.innerHTML = ''; // Clear existing content

    listings.forEach((listing, index) => {
      const card = document.createElement('div');
      card.className = 'bg-white shadow-md rounded-lg p-4 mb-4';

      card.innerHTML = `
        <div class="flex items-center gap-4">
          <img src="${listing.image}" alt="Listing Image" class="w-32 h-32 object-cover rounded-md">
          <div class="flex-1">
            <h2 class="text-xl font-semibold text-green-700">${listing.title}</h2>
            <p class="text-gray-600"><strong>Location:</strong> ${listing.location}</p>
            <p class="text-gray-600"><strong>Price:</strong> $${listing.price}/night</p>
            <p class="text-gray-600"><strong>Host:</strong> ${listing.hostName}</p>
            <p class="text-gray-600"><strong>Features:</strong> ${listing.features.join(', ')}</p>
            <p class="text-yellow-500">${listing.rating}</p>
          </div>
        </div>
      `;

      container.appendChild(card);
    });
  });
</script>
 <script>
  // Function to load listings from localStorage and render them
  function loadListings() {
    const listings = JSON.parse(localStorage.getItem('nova_listings')) || [];
    const container = document.getElementById('listings-container'); // your container id for listings

    // Clear existing content if any
    container.innerHTML = '';

    listings.forEach(listing => {
      // Create the HTML structure for each listing
      // Adjust classes and structure to match your existing design exactly
      
      const listingDiv = document.createElement('div');
      listingDiv.className = "listing-card bg-white rounded-lg shadow-md overflow-hidden mb-6";

      // Example inner HTML - adapt to your actual listing card markup
      listingDiv.innerHTML = `
        <div class="relative h-48 w-full overflow-hidden rounded-t-lg">
          <img src="${listing.images[0]}" alt="${listing.listingName}" class="object-cover w-full h-full" />
        </div>
        <div class="p-4">
          <h2 class="text-xl font-semibold text-gray-900 mb-1">${listing.listingName}</h2>
          <p class="text-gray-700">${listing.location}</p>
          <p class="mt-2 font-bold text-blue-600">KES ${listing.pricePerNight} / night</p>
          <p class="mt-2 text-sm text-gray-500">Hosted by: ${listing.hostName}</p>
        </div>
      `;

      container.appendChild(listingDiv);
    });
  }

  // Run on page load
  document.addEventListener('DOMContentLoaded', loadListings);
</script>

 <!-- Footer -->
  <footer class="bg-white border-t mt-12">
    <footer class="fixed bottom-0 left-0 w-full bg-white text-center py-4 text-gray-500 text-sm z-50 shadow">
      <p>&copy; 2025 Nova Prime. All rights reserved.</p>
      <div class="space-x-4">
        <a href="privacy.html" class="hover:text-green-600">Privacy</a>
        <a href="terms.html" class="hover:text-green-600">Terms</a>
        <a href="host.html" class="hover:text-green-600">Help</a>
      </div>
    </div>
  </footer>
    
</body>
</html>
